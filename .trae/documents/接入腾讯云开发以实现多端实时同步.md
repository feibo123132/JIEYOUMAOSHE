## 改造范围
1. 依赖与环境：新增 `@cloudbase/js-sdk`，在 `.env` 中配置 `VITE_CLOUDBASE_ENV_ID`、`VITE_CLOUDBASE_REGION`。
2. 服务层：新增 `src/services/cloudbase.ts`（已按你提供的集合名与猫ID设计），其余文件调用它完成读写。
3. 状态层：重构 `src/contexts/AppContext.tsx`，把初始化、互动、金币变更改为调用 TCB。
4. CI：将安装步骤由 `pnpm install --frozen-lockfile` 改为 `pnpm install`，以便拉取新依赖。

## 集合映射
- `Cat_users`（用户）
- `Cat_pet`（猫，固定 `_id: 'the_one_and_only_cat'`）
- `Cat_interactions`（互动，含 `day` 字段作为查询键）
- `Cat_coins`（金币流水，含 `day` 字段）

## 具体代码改动
1. `package.json`：新增依赖 `@cloudbase/js-sdk`
2. `src/services/cloudbase.ts`：
   - 初始化 SDK（`envId`、`region` 来自 `import.meta.env`）
   - 登录匿名并返回 `uid`
   - `getOrCreateUser(uid)`、`getCat()`
   - `getTodayInteractions(uid, date)`（用 `day = YYYY-MM-DD` 查询）
   - `writeInteraction(...)`、`writeCoin(...)`、`updateCatExperience(...)`、`updateUserCoins(...)`
3. `src/contexts/AppContext.tsx`：
   - 初始化：`ensureLogin → getOrCreateUser → getCat → getTodayInteractions`，设置全局状态
   - 互动：计算当日经验与金币 → 调用 `writeInteraction`，更新猫经验与用户金币（`updateCatExperience`、`writeCoin`、`updateUserCoins`）→ 通过 `checkLevelUp` 计算等级
   - 移除 `LocalStorage` 存取与标记逻辑
4. `.github/workflows/pages.yml`：把安装改为 `pnpm install`，以便安装新依赖。

## 验证
- 本地：配置 `.env` 并运行 `pnpm dev`；交互应在多个浏览器页面之间保持一致（刷新后不丢失）。
- CI：推送后 `build` 通过并成功部署。

## 说明
- 首次版本以前端执行业务校验为主；若需保证强一致性，可在下一步把“互动发放规则”迁移到云函数并由后端判定。

确认后我将按以上步骤直接修改 `AppContext.tsx`、工作流与依赖，并联调。