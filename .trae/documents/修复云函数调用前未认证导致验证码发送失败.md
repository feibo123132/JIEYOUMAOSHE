## 问题定位
- 错误信息："you can't request without auth"。这是 CloudBase 的前端在未登录态下调用 `callFunction` 的典型报错。
- 现状：我们把 App 初始化改为不强制匿名登录；但登录页发送验证码时直接调用云函数，导致未认证调用。

## 改造方案
1. 在 `src/services/cloudbase.ts` 的 `callLoginFunction` 内部，调用云函数前强制确保登录态：
   - `auth.getLoginState()`；若无登录态 → 优先 `auth.signInAnonymously()`，否则回退 `auth.anonymousAuthProvider().signIn()`。
   - 认证成功后再执行 `callFunction({ name:'login', data })`。
2. 增强错误日志：将云函数调用失败原因透出，便于定位（域名未授权、ENVID缺失、函数未部署等）。
3. 登录页不变：继续调用 `sendCode/verifyCode`，由封装自动确保认证。

## 环境检查（你侧）
- CloudBase 控制台：
  - Web 安全域名包含 `http://localhost:5173`、`http://127.0.0.1:5173`、`https://feibo123132.github.io`
  - 开启“匿名登录”
  - `login` 云函数已部署
- GitHub Actions Secrets 注入：`VITE_CLOUDBASE_ENV_ID`、`VITE_CLOUDBASE_REGION`

## 预期结果
- 发送验证码与校验不再报“未认证”；登录页可正常倒计时与登录。
- 若云函数未部署或权限问题，将在控制台看到明确错误日志。